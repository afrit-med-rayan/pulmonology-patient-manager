<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test Form Only</title>
    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/base.css" />
    <link rel="stylesheet" href="css/components.css" />
    <link rel="stylesheet" href="css/layout.css" />
  </head>
  <body>
    <div style="padding: 20px">
      <h1>Patient Form Test</h1>
      <div id="form-container"></div>
    </div>

    <script src="js/utils/constants.js"></script>
    <script src="js/utils/helpers.js"></script>
    <script src="js/utils/validation.js"></script>
    <script src="js/models/Patient.js"></script>
    <script src="js/components/FormManager.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        try {
          console.log("Testing form rendering...");

          // Create FormManager instance
          const formManager = new FormManager();

          // Render form
          const formId = "test-form";
          const formHtml = formManager.renderPatientForm(formId);

          console.log("Form HTML length:", formHtml.length);

          // Display form
          document.getElementById("form-container").innerHTML = formHtml;

          // Initialize form
          formManager.initializeForm(formId, {
            displayName: "Test Form",
            description: "Testing form rendering",
          });

          console.log("Form rendered successfully");

          // Test date limits
          const visitDateInputs =
            document.querySelectorAll('input[type="date"]');
          visitDateInputs.forEach((input) => {
            console.log(
              `Date input ${input.name} max attribute:`,
              input.getAttribute("max")
            );
          });
        } catch (error) {
          console.error("Form rendering failed:", error);
          document.getElementById("form-container").innerHTML = `
                    <div style="color: red; padding: 20px; border: 1px solid red;">
                        <h3>Error:</h3>
                        <p>${error.message}</p>
                        <pre>${error.stack}</pre>
                    </div>
                `;
        }
      });
    </script>
  </body>
</html>
