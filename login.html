<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login - Patient Management System</title>
    <style>
      :root {
        --primary-color: #1e40af;
        --primary-dark: #1e3a8a;
        --primary-light: #3b82f6;
        --secondary-color: #475569;
        --accent-color: #059669;
        --accent-light: #10b981;
        --danger-color: #dc2626;
        --warning-color: #d97706;
        --success-color: #059669;
        --background-color: #f8fafc;
        --surface-color: #ffffff;
        --text-primary: #0f172a;
        --text-secondary: #334155;
        --text-muted: #64748b;
        --border-color: #e2e8f0;
        --border-light: #f1f5f9;
        --shadow-sm: 0 1px 3px 0 rgb(0 0 0 / 0.1),
          0 1px 2px -1px rgb(0 0 0 / 0.1);
        --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1),
          0 2px 4px -2px rgb(0 0 0 / 0.1);
        --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1),
          0 4px 6px -4px rgb(0 0 0 / 0.1);
        --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1),
          0 8px 10px -6px rgb(0 0 0 / 0.1);
        --shadow-2xl: 0 25px 50px -12px rgb(0 0 0 / 0.25);
        --radius-sm: 0.375rem;
        --radius-md: 0.5rem;
        --radius-lg: 0.75rem;
        --radius-xl: 1rem;
        --radius-2xl: 1.5rem;
      }

      * {
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
          Roboto, "Helvetica Neue", Arial, sans-serif;
        margin: 0;
        padding: 0;
        background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        color: var(--text-primary);
        line-height: 1.6;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .login-container {
        background: var(--surface-color);
        padding: 3rem;
        border-radius: var(--radius-2xl);
        box-shadow: var(--shadow-2xl);
        width: 100%;
        max-width: 450px;
        border: 1px solid var(--border-color);
        position: relative;
        overflow: hidden;
      }

      .login-container::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(
          90deg,
          var(--primary-color) 0%,
          var(--accent-color) 100%
        );
      }

      .login-header {
        text-align: center;
        margin-bottom: 2.5rem;
      }

      .logo {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 1rem;
        margin-bottom: 1.5rem;
      }

      .logo-icon {
        width: 4rem;
        height: 4rem;
        background: linear-gradient(
          135deg,
          var(--primary-color) 0%,
          var(--accent-color) 100%
        );
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        color: white;
        font-weight: bold;
      }

      .login-title {
        color: var(--primary-color);
        font-size: 2rem;
        font-weight: 700;
        margin: 0;
        letter-spacing: -0.025em;
      }

      .login-subtitle {
        color: var(--text-secondary);
        font-size: 1rem;
        margin: 0.5rem 0 0 0;
      }

      .form-group {
        margin-bottom: 1.5rem;
      }

      .form-label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 600;
        color: var(--text-primary);
        font-size: 0.875rem;
      }

      .form-control {
        width: 100%;
        padding: 1rem 1.25rem;
        border: 2px solid var(--border-color);
        border-radius: var(--radius-xl);
        font-size: 1rem;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        background: var(--surface-color);
        color: var(--text-primary);
      }

      .form-control:focus {
        border-color: var(--primary-color);
        outline: none;
        box-shadow: 0 0 0 4px rgba(30, 64, 175, 0.1);
        transform: translateY(-2px);
        background: white;
      }

      .form-control:hover {
        border-color: var(--primary-light);
        background: white;
      }

      .btn {
        width: 100%;
        padding: 1rem 2rem;
        border: none;
        border-radius: var(--radius-xl);
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        position: relative;
        overflow: hidden;
      }

      .btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        transition: left 0.5s;
      }

      .btn:hover::before {
        left: 100%;
      }

      .btn-primary {
        background: linear-gradient(
          135deg,
          var(--primary-color) 0%,
          var(--accent-color) 100%
        );
        color: white;
        box-shadow: var(--shadow-lg);
      }

      .btn-primary:hover {
        background: linear-gradient(
          135deg,
          var(--accent-color) 0%,
          var(--primary-color) 100%
        );
        transform: translateY(-3px);
        box-shadow: var(--shadow-2xl);
      }

      .btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none !important;
      }

      .error-message {
        background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
        color: #991b1b;
        padding: 1rem;
        border-radius: var(--radius-xl);
        margin-bottom: 1.5rem;
        border: 1px solid #fca5a5;
        text-align: center;
        font-weight: 500;
        display: none;
      }

      .success-message {
        background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
        color: #065f46;
        padding: 1rem;
        border-radius: var(--radius-xl);
        margin-bottom: 1.5rem;
        border: 1px solid #10b981;
        text-align: center;
        font-weight: 500;
        display: none;
      }

      .demo-credentials {
        background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
        border: 1px solid #f59e0b;
        border-radius: var(--radius-xl);
        padding: 1.5rem;
        margin-top: 2rem;
        text-align: center;
      }

      .demo-credentials h4 {
        color: #92400e;
        margin: 0 0 1rem 0;
        font-size: 1rem;
        font-weight: 600;
      }

      .demo-credentials p {
        color: #92400e;
        margin: 0.5rem 0;
        font-size: 0.875rem;
      }

      .demo-credentials strong {
        font-weight: 700;
      }

      @media (max-width: 480px) {
        .login-container {
          margin: 1rem;
          padding: 2rem;
        }

        .login-title {
          font-size: 1.5rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="login-container">
      <div class="login-header">
        <div class="logo">
          <div class="logo-icon">MD</div>
        </div>
        <h1 class="login-title">Patient Management System</h1>
        <p class="login-subtitle">Dr. S. Sahboub - Pulmonology Practice</p>
      </div>

      <div id="error-message" class="error-message"></div>
      <div id="success-message" class="success-message"></div>

      <form id="login-form">
        <div class="form-group">
          <label for="username" class="form-label">Username</label>
          <input
            type="text"
            id="username"
            name="username"
            class="form-control"
            required
            autocomplete="username"
          />
        </div>

        <div class="form-group">
          <label for="password" class="form-label">Password</label>
          <input
            type="password"
            id="password"
            name="password"
            class="form-control"
            required
            autocomplete="current-password"
          />
        </div>

        <button type="submit" class="btn btn-primary" id="login-btn">
          Login
        </button>
      </form>

      <div class="demo-credentials">
        <h4>Demo Credentials</h4>
        <p><strong>Username:</strong> doctor</p>
        <p><strong>Password:</strong> sahboub123</p>
        <p style="margin-top: 1rem; font-size: 0.75rem; opacity: 0.8">
          Use these credentials to access the system
        </p>
      </div>
    </div>

    <script>
      // Demo credentials (in real app, this would be handled server-side)
      const validCredentials = {
        doctor: "sahboub123",
        admin: "admin123",
        "dr.sahboub": "pulmonology2024",
      };

      // Session duration (30 minutes)
      const SESSION_DURATION = 30 * 60 * 1000; // 30 minutes in milliseconds

      // Check if user is already logged in
      function checkExistingSession() {
        const session = localStorage.getItem("userSession");
        if (session) {
          try {
            const sessionData = JSON.parse(session);
            const now = new Date().getTime();

            if (now < sessionData.expiresAt) {
              // Session is still valid, redirect to main app
              window.location.href = "complete-patient-system.html";
              return;
            } else {
              // Session expired, clear it
              localStorage.removeItem("userSession");
              showMessage("Session expired. Please login again.", "error");
            }
          } catch (e) {
            // Invalid session data, clear it
            localStorage.removeItem("userSession");
          }
        }
      }

      // Show message function
      function showMessage(message, type = "error") {
        const errorDiv = document.getElementById("error-message");
        const successDiv = document.getElementById("success-message");

        // Hide both messages first
        errorDiv.style.display = "none";
        successDiv.style.display = "none";

        if (type === "error") {
          errorDiv.textContent = message;
          errorDiv.style.display = "block";
        } else {
          successDiv.textContent = message;
          successDiv.style.display = "block";
        }

        // Auto-hide after 5 seconds
        setTimeout(() => {
          errorDiv.style.display = "none";
          successDiv.style.display = "none";
        }, 5000);
      }

      // Create session
      function createSession(username) {
        const now = new Date().getTime();
        const sessionData = {
          username: username,
          loginTime: now,
          expiresAt: now + SESSION_DURATION,
          isActive: true,
        };

        localStorage.setItem("userSession", JSON.stringify(sessionData));
      }

      // Handle login form submission
      document
        .getElementById("login-form")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          const username = document.getElementById("username").value.trim();
          const password = document.getElementById("password").value;
          const loginBtn = document.getElementById("login-btn");

          // Disable button during login
          loginBtn.disabled = true;
          loginBtn.textContent = "Logging in...";

          // Simulate login delay (in real app, this would be an API call)
          setTimeout(() => {
            if (
              validCredentials[username] &&
              validCredentials[username] === password
            ) {
              // Successful login
              createSession(username);
              showMessage("Login successful! Redirecting...", "success");

              // Redirect after short delay
              setTimeout(() => {
                window.location.href = "complete-patient-system.html";
              }, 1500);
            } else {
              // Failed login
              showMessage("Invalid username or password. Please try again.");
              loginBtn.disabled = false;
              loginBtn.textContent = "Login";
            }
          }, 1000);
        });

      // Check for existing session on page load
      document.addEventListener("DOMContentLoaded", function () {
        // Check for any messages from logout or session expiry
        const loginMessage = localStorage.getItem("loginMessage");
        if (loginMessage) {
          showMessage(
            loginMessage,
            loginMessage.includes("successfully") ? "success" : "error"
          );
          localStorage.removeItem("loginMessage");
        }

        checkExistingSession();
      });

      // Auto-fill demo credentials when clicking on them
      document
        .querySelector(".demo-credentials")
        .addEventListener("click", function () {
          document.getElementById("username").value = "doctor";
          document.getElementById("password").value = "sahboub123";
        });
    </script>
  </body>
</html>
